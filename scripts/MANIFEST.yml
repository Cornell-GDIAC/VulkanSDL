# MANIFEST FILE FOR CREATING A RELEASE
srcroot: ..
copy:
# The SDL contents
- comment: "Copying SDL base"
- directory: components/SDL/src
  destination: src
  filter: false
- directory: components/SDL/include/SDL3
  destination: include/SDL3
  filter: true
  selection: '*.h'
- directory: components/SDL/include/build_config
  destination: include/build_config
  filter: true
  selection: '*.h'
- directory: components/SDL/wayland-protocols
  destination: wayland-protocols
  filter: false
# The SDL image contents
- comment: "Copying SDL image"
- directory: components/SDL_image/src
  destination: src/image
  filter: true
  selection: 'IMG*'
- directory: components/SDL_image/src
  destination: src/image
  filter: true
  selection: '*.h'
- directory: components/SDL_image/include/SDL3_image
  destination: include/SDL3
  filter: true
  selection: '*.h'
- directory: components/SDL_image/external/libwebp/src
  destination: external/libwebp/src
- directory: components/SDL_image/external/libwebp/sharpyuv
  destination: external/libwebp/sharpyuv
# The SDL ttf contents
- comment: "Copying SDL ttf"
- directory: components/SDL_ttf/src
  destination: src/ttf
  filter: true
  selection:
  - '*.h'
  - '*.c'
- directory: components/SDL_ttf/include/SDL3_ttf
  destination: include/SDL3
  filter: false
- directory: components/SDL_ttf/external/freetype/src
  destination: external/freetype/src
  filter: false
- directory: components/SDL_ttf/external/freetype/include
  destination: external/freetype/include
  filter: false
- directory: components/SDL_ttf/external/freetype/builds
  destination: external/freetype/builds
  filter: true
  selection:
  - 'cmake'
  - 'unix'
  - 'wince'
  - 'windows'
- directory: components/SDL_ttf/external/harfbuzz/src
  destination: external/harfbuzz/src
  filter: false
- directory: components/SDL_ttf/external/harfbuzz/util
  destination: external/harfbuzz/util
- group: 'components/SDL_ttf/external/harfbuzz/config*.h'
  destination: external/harfbuzz
- directory: components/SDL_ttf/external/plutosvg/source
  destination: external/plutosvg/source
  filter: false
- directory: components/SDL_ttf/external/plutosvg/plutovg/source
  destination: external/plutosvg/plutovg/source
  filter: false
- directory: components/SDL_ttf/external/plutosvg/plutovg/include
  destination: external/plutosvg/plutovg/include
  filter: false
# The SDL app contents
- comment: "Copying SDL app extensions"
- directory: src
  destination: src/app
  filter: false
- directory: include/SDL3_app
  destination: include/SDL3
  filter: false
# These files need post-process modifications
- comment: "Copying VulkanSDL buildfiles"
- directory: buildfiles
  destination: buildfiles
  filter: false
- directory: vulkan
  destination: vulkan
  filter: false
- directory: templates
  destination: templates
  filter: false
- directory: scripts
  destination: scripts
  filter: true
  selection:
  - 'android.py'
  - 'apple.py'
  - 'cmake.py'
  - 'iconify.py'
  - 'util.py'
  - 'windows.py'
- file: scripts/APP.md
  destination: README.md
- file: scripts/app.py
  destination: __main__.py
configure:
# Make sure all files agree on header space
- comment: "Reconfiguring SDL3 header locations"
- file: include/SDL3/SDL_textengine.h
  substitutions:
  - old: '<SDL3_ttf/'
    new: '<SDL3/'
- directory: src/ttf
  substitutions:
  - old: '<SDL3_ttf/'
    new: '<SDL3/'
  filter: true
  selection:
  - '*.c'
  - '*.h'
- directory: src/image
  substitutions:
  - old: '<SDL3_image/'
    new: '<SDL3/'
- directory: src/app
  substitutions:
  - old: '<SDL3_app/'
    new: '<SDL3/'
  filter: true
  selection:
  - '*.c'
  - '*.h'
- file: src/app/display/appkit/APP_sysinternals.m
  substitutions:
  - old: '../components/SDL/src/video'
    new: 'video'
- file: src/app/display/uikit/APP_sysinternals.m
  substitutions:
  - old: '../components/SDL/src/video'
    new: 'video'
# Apple build files
- comment: "Configuring Apple buildfiles"
- file: buildfiles/apple/sdl3.xcodeproj/project.pbxproj
  substitutions:
  - old: '/components/SDL'
    new: ''
- file: buildfiles/apple/sdl3image.xcodeproj/project.pbxproj
  substitutions:
  - old: '\t\t\tname = source;\n\t\t\tpath = ../../components/SDL_image/src;'
    new: '\t\t\tname = source;\n\t\t\tpath = ../../src/image;'
  - old: '\t\t\tname = include;\n\t\t\tpath = ../../components/SDL_image/include/SDL3_image;'
    new: '\t\t\tname = include;\n\t\t\tpath = ../../include/SDL3;'
  - old: '/components/SDL/'
    new: '/'
  - old: '/components/SDL_image/'
    new: '/'
- file: buildfiles/apple/sdl3ttf.xcodeproj/project.pbxproj
  substitutions:
  - old: '\t\t\tname = source;\n\t\t\tpath = ../../components/SDL_ttf/src;'
    new: '\t\t\tname = source;\n\t\t\tpath = ../../src/ttf;'
  - old: '\t\t\tname = include;\n\t\t\tpath = ../../components/SDL_ttf/include/SDL3_ttf;'
    new: '\t\t\tname = include;\n\t\t\tpath = ../../include/SDL3;'
  - old: '/components/SDL/'
    new: '/'
  - old: '/components/SDL_ttf/'
    new: '/'
- file: buildfiles/apple/sdl3app.xcodeproj/project.pbxproj
  substitutions:
  - old: '\t\t\tname = source;\n\t\t\tpath = ../../src;'
    new: '\t\t\tname = source;\n\t\t\tpath = ../../src/app;'
  - old: '\t\t\tname = include;\n\t\t\tpath = ../../include/SDL3_app;'
    new: '\t\t\tname = include;\n\t\t\tpath = ../../include/SDL3;'
  - old: '\t\t\tpath = ../../components/SDL/include/SDL3;\n'
    new: ''
  - old: '\t\t\tpath = ../../components/SDL_image/include/SDL3_image;\n'
    new: ''
  - old: '\t\t\tpath = ../../components/SDL_ttf/include/SDL3_ttf;\n'
    new: ''
  - old: '/components/SDL/'
    new: '/'
# CMake build files
- comment: "Configuring CMake buildfiles"
- file: buildfiles/cmake/sdl3/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_BASE_OFFSET "/components/SDL")'
    new: 'set(SDL3_BASE_OFFSET "")'
- file: buildfiles/cmake/sdl3image/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_IMAGE_OFFSET "/components/SDL_image")'
    new: 'set(SDL3_IMAGE_OFFSET "")'
  - old: 'set(SDL3_IMAGE_SRC "${SDL3_IMAGE_DIR}/src")'
    new: 'set(SDL3_IMAGE_SRC "${SDL3_IMAGE_DIR}/src/image")'
  - old: 'FILES "${SDL3_IMAGE_INC}/SDL3_image/SDL_image.h"'
    new: 'FILES "${SDL3_IMAGE_INC}/SDL3/SDL_image.h"'
- file: buildfiles/cmake/sdl3image/external/jpeg/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_IMAGE_OFFSET "/components/SDL_image")'
    new: 'set(SDL3_IMAGE_OFFSET "")'
- file: buildfiles/cmake/sdl3image/external/libpng/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_IMAGE_OFFSET "/components/SDL_image")'
    new: 'set(SDL3_IMAGE_OFFSET "")'
- file: buildfiles/cmake/sdl3image/external/libwebp/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_IMAGE_OFFSET "/components/SDL_image")'
    new: 'set(SDL3_IMAGE_OFFSET "")'
- file: buildfiles/cmake/sdl3image/external/zlib/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_IMAGE_OFFSET "/components/SDL_image")'
    new: 'set(SDL3_IMAGE_OFFSET "")'
- file: buildfiles/cmake/sdl3ttf/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_TTF_OFFSET "/components/SDL_ttf")'
    new: 'set(SDL3_TTF_OFFSET "")'
  - old: 'set(SDL3_TTF_SRC "${SDL3_TTF_DIR}/src")'
    new: 'set(SDL3_TTF_SRC "${SDL3_TTF_DIR}/src/ttf")'
  - old: '${SDL3_TTF_INC}/SDL3_ttf'
    new: '${SDL3_TTF_INC}/SDL3'
- file: buildfiles/cmake/sdl3ttf/external/freetype/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_TTF_OFFSET "/components/SDL_ttf")'
    new: 'set(SDL3_TTF_OFFSET "")'
- file: buildfiles/cmake/sdl3ttf/external/harfbuzz/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_TTF_OFFSET "/components/SDL_ttf")'
    new: 'set(SDL3_TTF_OFFSET "")'
- file: buildfiles/cmake/sdl3ttf/external/plutosvg/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_TTF_OFFSET "/components/SDL_ttf")'
    new: 'set(SDL3_TTF_OFFSET "")'
- file: buildfiles/cmake/sdl3ttf/external/plutosvg/plutovg/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_TTF_OFFSET "/components/SDL_ttf")'
    new: 'set(SDL3_TTF_OFFSET "")'
- file: buildfiles/cmake/CMakeLists.txt
  substitutions:
  - old: 'set(SDL3_APP_SRC   "${SDL3_APP_DIR}/src")'
    new: 'set(SDL3_APP_SRC   "${SDL3_APP_DIR}/src/app")'
  - old: 'set(SDL3_BASE_DIR  "${SDL3_APP_DIR}/components/SDL")'
    new: 'set(SDL3_BASE_DIR  "${SDL3_APP_DIR}")'
  - old: 'set(SDL3_IMAGE_DIR "${SDL3_APP_DIR}/components/SDL_image")'
    new: 'set(SDL3_IMAGE_DIR "${SDL3_APP_DIR}")'
  - old: 'set(SDL3_TTF_DIR   "${SDL3_APP_DIR}/components/SDL_ttf")'
    new: 'set(SDL3_TTF_DIR   "${SDL3_APP_DIR}")'
  - old: '${SDL3_APP_INC}/SDL3_app'
    new: '${SDL3_APP_INC}/SDL3'
# Android build files
- comment: "Configuring Android buildfiles"
- file: buildfiles/android/jni/sdl2/Android.mk
  substitutions:
  - old: 'SDL2_OFFSET := ../../../components/SDL'
    new: 'SDL2_OFFSET := ../../..'
- file: buildfiles/android/jni/sdl2app/Android.mk
  substitutions:
  - old: 'SDL2_OFFSET := ../../../components/SDL'
    new: 'SDL2_OFFSET := ../../..'
  - old: 'SDL2_APP_SOURCE := $(SDL2_APP_PATH)/src'
    new: 'SDL2_APP_SOURCE := $(SDL2_APP_PATH)/src/app'
- file: buildfiles/android/jni/sdl2image/Android.mk
  substitutions:
  - old: 'SDL2_OFFSET := ../../../components/SDL'
    new: 'SDL2_OFFSET := ../../..'
  - old: 'IMAGE_OFFSET := ../../../components/SDL_image'
    new: 'IMAGE_OFFSET := ../../..'
  - old: 'SDL2_IMAGE_SOURCE  := $(SDL2_IMAGE_PATH)/src'
    new: 'SDL2_IMAGE_SOURCE  := $(SDL2_IMAGE_PATH)/src/image'
- file: buildfiles/android/jni/sdl2image/external/libwebp/Android.mk
  substitutions:
  - old: 'IMAGE_OFFSET := ../../../components/SDL_image'
    new: 'IMAGE_OFFSET := ../../..'
- file: buildfiles/android/jni/sdl2ttf/Android.mk
  substitutions:
  - old: 'SDL2_OFFSET := ../../../components/SDL'
    new: 'SDL2_OFFSET := ../../..'
  - old: 'TTF_OFFSET  := ../../../components/SDL_ttf'
    new: 'TTF_OFFSET  := ../../..'
  - old: 'SDL2_TTF_SOURCE := $(SDL2_TTF_PATH)'
    new: 'SDL2_TTF_SOURCE := $(SDL2_TTF_PATH)/src/ttf'
- file: buildfiles/android/jni/sdl2ttf/external/freetype/Android.mk
  substitutions:
  - old: 'TTF_OFFSET  := ../../../components/SDL_ttf'
    new: 'TTF_OFFSET  := ../../..'
- file: buildfiles/android/jni/sdl2ttf/external/harfbuzz/Android.mk
  substitutions:
  - old: 'TTF_OFFSET  := ../../../components/SDL_ttf'
    new: 'TTF_OFFSET  := ../../..'
- file: buildfiles/android/jni/CMakeLists.txt
  substitutions:
  - old: 'set(SDL2_BASE_DIR  "${VULKAN_SDL_DIR}/components/SDL")'
    new: 'set(SDL2_BASE_DIR  "${VULKAN_SDL_DIR}")'
  - old: 'set(SDL2_IMAGE_DIR "${VULKAN_SDL_DIR}/components/SDL_image")'
    new: 'set(SDL2_IMAGE_DIR "${VULKAN_SDL_DIR}")'
  - old: 'set(SDL2_TTF_DIR   "${VULKAN_SDL_DIR}/components/SDL_ttf")'
    new: 'set(SDL2_TTF_DIR   "${VULKAN_SDL_DIR}")'
# Windows build files
- comment: "Configuring Windows buildfiles"
- file: buildfiles/windows/sdl3/sdl3.vcxproj
  substitutions:
  - old: 'components\\SDL\\'
    new: '\\'
- file: buildfiles/windows/sdl3/sdl3.vcxproj.filters
  substitutions:
  - old: 'components\\SDL\\'
    new: '\\'
- file: buildfiles/windows/sdl3image/sdl3image.vcxproj
  substitutions:
  - old: 'components\\SDL\\include'
    new: 'include'
  - old: 'components\\SDL_image\\src\\IMG.c'
    new: 'src\\image\\IMG.c'
  - old: 'components\\SDL_image\\src\\IMG_'
    new: 'src\\image\\IMG_'
  - old: 'components\\SDL_image\\SDL_image.h'
    new: 'include\\SDL_image.h'
  - old: 'components\\SDL_image\\external'
    new: 'external'
- file: buildfiles/windows/sdl3image/sdl3image.vcxproj.filters
  substitutions:
  - old: 'components\\SDL\\include'
    new: 'include'
  - old: 'components\\SDL_image\\include\\SDL3_image'
    new: 'include\\SDL3'
  - old: 'components\\SDL_image\\src\\IMG.c'
    new: 'src\\image\\IMG.c'
  - old: 'components\\SDL_image\\src\\IMG_'
    new: 'src\\image\\IMG_'
  - old: 'components\\SDL_image\\external'
    new: 'external'
- file: buildfiles/windows/sdl3ttf/sdl3ttf.vcxproj
  substitutions:
  - old: 'components\\SDL\\include'
    new: 'include'
  - old: 'components\\SDL_ttf\\include\\SDL3_ttf'
    new: 'include\\SDL3'
  - old: 'components\\SDL_ttf\\src\\SDL_'
    new: 'src\\ttf\\SDL_'
  - old: 'components\\SDL_ttf\\external'
    new: 'external'
- file: buildfiles/windows/sdl3ttf/sdl3ttf.vcxproj.filters
  substitutions:
  - old: 'components\\SDL\\include'
    new: 'include'
  - old: 'components\\SDL_ttf\\include\\SDL3_ttf'
    new: 'include\\SDL3'
  - old: 'components\\SDL_ttf\\SDL_'
    new: 'src\\ttf\\SDL_'
  - old: 'components\\SDL_ttf\\external'
    new: 'external'
- file: buildfiles/windows/sdl3app/sdl3app.vcxproj
  substitutions:
  - old: 'components\\SDL\\include\\SDL3_app'
    new: 'include\\SDL3'
  - old: '..\\src'
    new: '..\\src\\app'
- file: buildfiles/windows/sdl3app/sdl3app.vcxproj.filters
  substitutions:
  - old: 'components\\SDL\\include\\SDL3_app'
    new: 'include\\SDL3'
  - old: '..\\src'
    new: '..\\src\\app'
remove:
# Apple Extras
- comment: "Removing unneeded Apple files"
- directory: buildfiles/apple/sdl3app.xcodeproj/xcshareddata
- directory: buildfiles/apple/sdl3app.xcodeproj/xcuserdata
- directory: buildfiles/apple/sdl3.xcodeproj/xcshareddata
- directory: buildfiles/apple/sdl3.xcodeproj/xcuserdata
- directory: buildfiles/apple/sdl3image.xcodeproj/xcshareddata
- directory: buildfiles/apple/sdl3image.xcodeproj/xcuserdata
- directory: buildfiles/apple/sdl3ttf.xcodeproj/xcshareddata
- directory: buildfiles/apple/sdl3ttf.xcodeproj/xcuserdata
# Windows Extras
- comment: "Removing unneeded Windows files"
- file: buildfiles/windows/sdl3/sdl3.sln
- file: buildfiles/windows/sdl3atk/sdl3atk.sln
- file: buildfiles/windows/sdl3image/sdl3image.sln
- file: buildfiles/windows/sdl3ttf/sdl3ttf.sln
