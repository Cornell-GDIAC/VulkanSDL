# PROJECT CMAKE FILE
# This file is autogenerated by the creator script
cmake_minimum_required(VERSION 3.10)
if(POLICY CMP0077)
	set(CMAKE_POLICY_DEFAULT_CMP0077 NEW)
endif()

# set the project name and version
project(__TARGET__ VERSION __VERSION__)

# specify the C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED True)

option(USE_VULKAN "Include Vulkan in this application build" ON)

# Add Android specific features
if (ANDROID)
	include(AndroidNdkModules)
	if (${ANDROID_ABI} STREQUAL "armeabi-v7a")
		# armeabi-v7a requires cpufeatures library
		android_ndk_import_module_cpufeatures()
	endif()
endif()

# Make sure we support Vulkan
if (USE_VULKAN)
	find_library(vulkan-lib vulkan)
endif()

# Set the correct directories
set(SDL2_DIR  __SDL2DIR__)
set(ASSET_DIR  __ASSETDIR__)

# Add the SDL App project
add_subdirectory(${SDL2_DIR}/buildfiles/cmake "vulkansdl.dir")
list(APPEND EXTRA_INCLUDES "${SDL2_DIR}/include")
list(APPEND EXTRA_INCLUDES "${SDL2_DIR}/extras")
__EXTRA_INCLUDES__

# Add the source code
file(GLOB SOURCE_FILES
    __SOURCELIST__)

# Build and link
if (USE_VULKAN)
	# YES, we still want to allow OpenGL to exist
	set(ANDROID_LIBS GLESv1_CM GLESv2 GLESv3 log android ${vulkan-lib})
else()
	set(ANDROID_LIBS GLESv1_CM GLESv2 GLESv3 log android)
endif()
add_library(main SHARED)
target_sources(main PRIVATE ${SOURCE_FILES})
target_include_directories(main PUBLIC
                           "${PROJECT_BINARY_DIR}"
                            ${EXTRA_INCLUDES}
                           )
target_link_libraries(main VulkanSDL ${ANDROID_LIBS})

